<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Instagram Cropper</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              instagram: {
                pink: "#E4405F",
                purple: "#833AB4",
                orange: "#F56040",
                yellow: "#FCCC63",
                blue: "#4285F4",
              },
            },
            animation: {
              gradient: "gradient 6s ease infinite",
              float: "float 6s ease-in-out infinite",
              "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
            keyframes: {
              gradient: {
                "0%, 100%": {
                  "background-size": "200% 200%",
                  "background-position": "left center",
                },
                "50%": {
                  "background-size": "200% 200%",
                  "background-position": "right center",
                },
              },
              float: {
                "0%, 100%": { transform: "translateY(0px)" },
                "50%": { transform: "translateY(-10px)" },
              },
            },
          },
        },
      };
    </script>
    <style>
      .gradient-bg {
        background: linear-gradient(-45deg, #833ab4, #e4405f, #f56040, #fccc63);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
      }

      .glass-effect {
        backdrop-filter: blur(16px) saturate(180%);
        background-color: rgba(255, 255, 255, 0.75);
        border: 1px solid rgba(255, 255, 255, 0.125);
      }

      .dark-glass {
        backdrop-filter: blur(16px) saturate(180%);
        background-color: rgba(17, 25, 40, 0.75);
        border: 1px solid rgba(255, 255, 255, 0.125);
      }

      .preview-info {
        backdrop-filter: blur(8px);
        background: rgba(0, 0, 0, 0.7);
      }

      @media (max-width: 640px) {
        .mobile-stack {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body class="min-h-screen gradient-bg">
    <!-- Background Pattern -->
    <div class="fixed inset-0 opacity-20">
      <div
        class="absolute inset-0"
        style="
          background-image: radial-gradient(
            circle at 1px 1px,
            rgba(255, 255, 255, 0.3) 1px,
            transparent 0
          );
          background-size: 50px 50px;
        "
      ></div>
    </div>

    <!-- Main Container -->
    <div
      class="relative min-h-screen flex items-center justify-center p-4 sm:p-6 lg:p-8"
    >
      <div class="w-full max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8 sm:mb-12">
          <h1
            class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-4 animate-float"
          >
            <span
              class="bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 bg-clip-text text-transparent"
            >
              Instagram
            </span>
            <span class="text-white">Cropper</span>
          </h1>
          <p class="text-lg sm:text-xl text-white/80 max-w-2xl mx-auto">
            Transform your images into perfect Instagram posts with professional
            padding and aspect ratios
          </p>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
          <!-- Controls Panel -->
          <div class="glass-effect rounded-3xl p-6 sm:p-8 shadow-2xl">
            <div class="space-y-6 sm:space-y-8">
              <!-- File Upload Section -->
              <div class="space-y-4">
                <h3
                  class="text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-3"
                >
                  <div
                    class="w-8 h-8 bg-gradient-to-r from-instagram-pink to-instagram-purple rounded-lg flex items-center justify-center"
                  >
                    <svg
                      class="w-5 h-5 text-white"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                      />
                    </svg>
                  </div>
                  Upload Image
                </h3>

                <div class="relative group">
                  <input
                    type="file"
                    id="fileInput"
                    accept="image/*"
                    class="hidden"
                  />
                  <label
                    for="fileInput"
                    class="flex flex-col items-center justify-center w-full h-32 sm:h-40 border-3 border-dashed border-gray-300 rounded-2xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition-all duration-300 group-hover:border-instagram-pink group-hover:bg-pink-50"
                  >
                    <div
                      class="flex flex-col items-center justify-center pt-5 pb-6"
                    >
                      <svg
                        class="w-8 h-8 sm:w-10 sm:h-10 mb-3 text-gray-400 group-hover:text-instagram-pink transition-colors"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                        />
                      </svg>
                      <p
                        class="mb-2 text-sm sm:text-base text-gray-500 group-hover:text-instagram-pink transition-colors"
                      >
                        <span class="font-semibold">Click to upload</span> or
                        drag and drop
                      </p>
                      <p class="text-xs text-gray-500">
                        PNG, JPG, JPEG (MAX. 10MB)
                      </p>
                    </div>
                  </label>
                </div>
              </div>

              <!-- Instagram Format Selection -->
              <div class="space-y-4">
                <h3
                  class="text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-3"
                >
                  <div
                    class="w-8 h-8 bg-gradient-to-r from-instagram-purple to-instagram-blue rounded-lg flex items-center justify-center"
                  >
                    <svg
                      class="w-5 h-5 text-white"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                      />
                    </svg>
                  </div>
                  Format
                </h3>

                <select
                  id="aspectRatioSelect"
                  class="w-full px-4 py-3 sm:py-4 text-sm sm:text-base bg-white border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-instagram-pink/20 focus:border-instagram-pink transition-all duration-300 appearance-none cursor-pointer"
                >
                  <option value="1">üì± Instagram Square Post (1:1)</option>
                  <option value="0.8">üì∑ Instagram Portrait Post (4:5)</option>
                  <option value="1.91">
                    üñºÔ∏è Instagram Landscape Post (1.91:1)
                  </option>
                  <option value="0.5625">üì± Instagram Story/Reel (9:16)</option>
                </select>
              </div>

              <!-- Fit Mode Selection -->
              <div class="space-y-4">
                <h3
                  class="text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-3"
                >
                  <div
                    class="w-8 h-8 bg-gradient-to-r from-instagram-orange to-instagram-yellow rounded-lg flex items-center justify-center"
                  >
                    <svg
                      class="w-5 h-5 text-white"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"
                      />
                    </svg>
                  </div>
                  Mode
                </h3>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                  <label
                    class="relative flex items-center p-4 sm:p-5 bg-white border-2 border-gray-200 rounded-xl cursor-pointer hover:border-instagram-pink transition-all duration-300 group"
                  >
                    <input
                      type="radio"
                      name="fitMode"
                      value="fit"
                      checked
                      class="sr-only"
                    />
                    <div class="flex items-center w-full">
                      <div
                        class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 group-hover:border-instagram-pink transition-colors flex items-center justify-center"
                      >
                        <div
                          class="w-2.5 h-2.5 bg-instagram-pink rounded-full opacity-0 group-hover:opacity-100 transition-opacity"
                        ></div>
                      </div>
                      <div>
                        <div
                          class="font-semibold text-gray-800 text-sm sm:text-base"
                        >
                          Fit Mode
                        </div>
                        <div class="text-xs sm:text-sm text-gray-500">
                          Add padding to fit
                        </div>
                      </div>
                    </div>
                  </label>

                  <label
                    class="relative flex items-center p-4 sm:p-5 bg-white border-2 border-gray-200 rounded-xl cursor-pointer hover:border-instagram-pink transition-all duration-300 group"
                  >
                    <input
                      type="radio"
                      name="fitMode"
                      value="fill"
                      class="sr-only"
                    />
                    <div class="flex items-center w-full">
                      <div
                        class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 group-hover:border-instagram-pink transition-colors flex items-center justify-center"
                      >
                        <div
                          class="w-2.5 h-2.5 bg-instagram-pink rounded-full opacity-0 group-hover:opacity-100 transition-opacity"
                        ></div>
                      </div>
                      <div>
                        <div
                          class="font-semibold text-gray-800 text-sm sm:text-base"
                        >
                          Fill Mode
                        </div>
                        <div class="text-xs sm:text-sm text-gray-500">
                          Crop to fill
                        </div>
                      </div>
                    </div>
                  </label>
                </div>
              </div>

              <!-- Generate Button -->
              <button
                id="padButton"
                class="w-full py-4 sm:py-5 px-6 bg-gradient-to-r from-instagram-pink via-instagram-purple to-instagram-blue text-white font-bold text-base sm:text-lg rounded-2xl hover:from-instagram-purple hover:via-instagram-blue hover:to-instagram-pink transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-2xl flex items-center justify-center gap-3 group"
              >
                <svg
                  class="w-5 h-5 sm:w-6 sm:h-6 group-hover:rotate-180 transition-transform duration-500"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                  />
                </svg>
                Generate & Download
              </button>
            </div>
          </div>

          <!-- Preview Panel -->
          <div class="glass-effect rounded-3xl p-6 sm:p-8 shadow-2xl">
            <h3
              class="text-xl sm:text-2xl font-semibold text-gray-800 mb-6 flex items-center gap-3"
            >
              <div
                class="w-8 h-8 bg-gradient-to-r from-instagram-blue to-instagram-purple rounded-lg flex items-center justify-center"
              >
                <svg
                  class="w-5 h-5 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                  />
                </svg>
              </div>
              Preview
            </h3>

            <div
              id="preview"
              class="relative w-full min-h-[300px] sm:min-h-[400px] lg:min-h-[500px] bg-gray-100 rounded-2xl border-3 border-dashed border-gray-300 flex items-center justify-center overflow-hidden group"
            >
              <div class="text-center text-gray-500 p-8">
                <svg
                  class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 opacity-50"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
                <p class="text-sm sm:text-base">
                  Your cropped image will appear here
                </p>
                <p class="text-xs sm:text-sm mt-2 opacity-75">
                  Upload an image to get started
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 sm:mt-12">
          <p class="text-white/60 text-sm sm:text-base">
            Made with ‚ù§Ô∏è for Instagram creators
          </p>
        </div>
      </div>
    </div>

    <script>
      class InstagramCropper {
        constructor() {
          this.fileInput = document.getElementById("fileInput");
          this.preview = document.getElementById("preview");
          this.aspectRatioSelect = document.getElementById("aspectRatioSelect");
          this.padButton = document.getElementById("padButton");
          this.fitModeInputs = document.getElementsByName("fitMode");
          this.image = null;
          this.processedImageDataURL = null;

          this.initEventListeners();
          this.updateRadioStyles();
        }

        initEventListeners() {
          this.fileInput.addEventListener("change", (e) =>
            this.handleFileInput(e)
          );
          this.padButton.addEventListener("click", () =>
            this.handleGenerateAndDownload()
          );
          this.aspectRatioSelect.addEventListener("change", () =>
            this.processImage()
          );
          this.fitModeInputs.forEach((input) => {
            input.addEventListener("change", () => {
              this.processImage();
              this.updateRadioStyles();
            });
          });
        }

        updateRadioStyles() {
          this.fitModeInputs.forEach((input) => {
            const label = input.closest("label");
            const indicator = label.querySelector("div > div");

            if (input.checked) {
              label.classList.add("border-instagram-pink", "bg-pink-50");
              label.classList.remove("border-gray-200");
              indicator.classList.add("opacity-100");
              indicator.classList.remove("opacity-0");
            } else {
              label.classList.remove("border-instagram-pink", "bg-pink-50");
              label.classList.add("border-gray-200");
              indicator.classList.remove("opacity-100");
              indicator.classList.add("opacity-0");
            }
          });
        }

        handleFileInput(e) {
          const file = e.target.files[0];
          if (!file) {
            this.resetPreview();
            return;
          }

          // Show loading state
          this.showLoadingState();

          const reader = new FileReader();
          reader.onload = () => {
            this.image = new Image();
            this.image.onload = () => {
              this.processImage();
            };
            this.image.onerror = () => {
              alert("Error loading image. Please try a different file.");
              this.resetPreview();
            };
            this.image.src = reader.result;
          };
          reader.readAsDataURL(file);
        }

        showLoadingState() {
          this.preview.innerHTML = `
            <div class="flex flex-col items-center justify-center text-instagram-purple">
              <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-instagram-purple mb-4"></div>
              <p class="text-sm font-medium">Processing image...</p>
            </div>
          `;
          this.preview.classList.remove(
            "border-dashed",
            "border-gray-300",
            "bg-gray-100"
          );
          this.preview.classList.add(
            "border-solid",
            "border-instagram-purple/30",
            "bg-purple-50"
          );
        }

        resetPreview() {
          this.preview.innerHTML = `
            <div class="text-center text-gray-500 p-8">
              <svg class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
              <p class="text-sm sm:text-base">Your cropped image will appear here</p>
              <p class="text-xs sm:text-sm mt-2 opacity-75">Upload an image to get started</p>
            </div>
          `;
          this.preview.classList.remove(
            "border-solid",
            "border-green-400",
            "border-instagram-purple/30",
            "bg-gradient-to-br",
            "from-green-50",
            "to-emerald-50",
            "bg-purple-50",
            "shadow-inner"
          );
          this.preview.classList.add(
            "border-dashed",
            "border-gray-300",
            "bg-gray-100"
          );
          this.image = null;
          this.processedImageDataURL = null;
        }

        getSelectedFitMode() {
          const selectedRadio = Array.from(this.fitModeInputs).find(
            (r) => r.checked
          );
          return selectedRadio ? selectedRadio.value : null;
        }

        calculateTargetDimensions(aspectRatio, mode) {
          const originalWidth = this.image.naturalWidth;
          const originalHeight = this.image.naturalHeight;
          const currentRatio = originalWidth / originalHeight;

          let targetWidth, targetHeight;

          if (mode === "fit") {
            targetWidth = originalWidth;
            targetHeight = originalHeight;
            if (currentRatio > aspectRatio) {
              targetHeight = Math.round(originalWidth / aspectRatio);
            } else if (currentRatio < aspectRatio) {
              targetWidth = Math.round(originalHeight * aspectRatio);
            }
          } else {
            if (currentRatio > aspectRatio) {
              targetWidth = Math.round(originalHeight * aspectRatio);
              targetHeight = originalHeight;
            } else {
              targetWidth = originalWidth;
              targetHeight = Math.round(originalWidth / aspectRatio);
            }
          }

          return {
            targetWidth,
            targetHeight,
            originalWidth,
            originalHeight,
            currentRatio,
          };
        }

        drawImageOnCanvas(canvas, ctx, dimensions, mode, aspectRatio) {
          const {
            targetWidth,
            targetHeight,
            originalWidth,
            originalHeight,
            currentRatio,
          } = dimensions;

          ctx.clearRect(0, 0, targetWidth, targetHeight);

          if (mode === "fit") {
            const dx = (targetWidth - originalWidth) / 2;
            const dy = (targetHeight - originalHeight) / 2;
            ctx.drawImage(this.image, dx, dy);
          } else {
            let sx = 0,
              sy = 0,
              sWidth = originalWidth,
              sHeight = originalHeight;

            if (currentRatio > aspectRatio) {
              sWidth = originalHeight * aspectRatio;
              sx = (originalWidth - sWidth) / 2;
            } else {
              sHeight = originalWidth / aspectRatio;
              sy = (originalHeight - sHeight) / 2;
            }

            ctx.drawImage(
              this.image,
              sx,
              sy,
              sWidth,
              sHeight,
              0,
              0,
              targetWidth,
              targetHeight
            );
          }
        }

        processImage() {
          if (!this.image) return;

          const aspectRatio = parseFloat(this.aspectRatioSelect.value);
          const mode = this.getSelectedFitMode();

          if (!mode) {
            alert("Please select 'fit' or 'fill' mode.");
            return;
          }

          const dimensions = this.calculateTargetDimensions(aspectRatio, mode);
          const canvas = document.createElement("canvas");
          canvas.width = dimensions.targetWidth;
          canvas.height = dimensions.targetHeight;
          const ctx = canvas.getContext("2d");

          this.drawImageOnCanvas(canvas, ctx, dimensions, mode, aspectRatio);

          this.processedImageDataURL = canvas.toDataURL("image/png");
          this.updatePreview();
        }

        updatePreview() {
          // Create image container for better positioning and centering
          const imageContainer = document.createElement("div");
          imageContainer.className =
            "w-full h-full flex items-center justify-center p-4";

          const resultImg = new Image();
          resultImg.src = this.processedImageDataURL;
          resultImg.className =
            "max-w-full max-h-full object-contain rounded-xl shadow-2xl border border-white/20 transition-all duration-500 hover:scale-105";

          // Create info overlay showing dimensions
          const aspectRatio = parseFloat(this.aspectRatioSelect.value);
          const mode = this.getSelectedFitMode();
          const dimensions = this.calculateTargetDimensions(aspectRatio, mode);

          const infoDiv = document.createElement("div");
          infoDiv.className =
            "preview-info absolute top-4 right-4 px-3 py-2 text-white text-xs sm:text-sm font-semibold rounded-lg shadow-lg backdrop-blur-sm";
          infoDiv.textContent = `${dimensions.targetWidth} √ó ${dimensions.targetHeight}px`;

          // Clear preview and add new content
          this.preview.innerHTML = "";
          imageContainer.appendChild(resultImg);
          this.preview.appendChild(imageContainer);
          this.preview.appendChild(infoDiv);

          // Update preview container styling with smooth transition
          this.preview.classList.remove(
            "border-dashed",
            "border-gray-300",
            "bg-gray-100"
          );
          this.preview.classList.add(
            "border-solid",
            "border-green-400",
            "bg-gradient-to-br",
            "from-green-50",
            "to-emerald-50",
            "shadow-inner"
          );
        }

        downloadImage() {
          if (!this.processedImageDataURL) return;

          const link = document.createElement("a");
          link.href = this.processedImageDataURL;
          link.download = "instagram-cropped-image.png";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        handleGenerateAndDownload() {
          if (!this.image) {
            alert("Please upload an image first!");
            return;
          }
          this.processImage();
          this.downloadImage();
        }
      }

      // Initialize the application
      document.addEventListener("DOMContentLoaded", () => {
        new InstagramCropper();
      });
    </script>
  </body>
</html>
